"use strict";var len=$("#register_form").find(".itxt").length,arr=[];$("#register_form").on("focus",".item",function(){index=$(this).index(),$(this).find("span").css("display","block")}).find("input").blur(function(){var t=this;$(this).val().trim()?"tel"==$(this).attr("id")?/^1[3-9]\d{9}$/.test($(this).val())?$.ajax({type:"post",url:"../api/reg.php",async:!1,data:{tel:$(this).val()},success:function(a){"yes"==a?(arr[0]=1,$(t).parent().find("span").html("号码可用").css("color","green")):(arr[0]=0,$(t).parent().find("span").html("此号码已被注册").css("color","red"))}}):($(this).parent().find("span").html("请输入正确的号码").css("color","red"),arr[0]=0):"getCode"==$(this).attr("id")?$(this).val()==code?arr[1]=1:arr[1]=0:"password"==$(this).attr("id")?($(this).val()==$("#checkPassWord").val()?(arr[3]=1,$("#checkPassWord").parent().find("span").html("密码确认成功").css("color","green")):$(this).val()!=$("#checkPassWord").val()&&(arr[3]=0,$("#checkPassWord").parent().find("span").html("两次密码不一致").css("color","red")),/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$/.test($(this).val())?($(this).parent().find("span").html("密码可用").css("color","green"),arr[2]=1):($(this).parent().find("span").html("请输入正确的六位数密码,数字加大小写字母").css("color","red"),arr[2]=0)):"checkPassWord"==$(this).attr("id")?$(this).val()==$("#password").val()?($(this).parent().find("span").html("密码确认成功").css("color","green"),arr[3]=1):($(this).parent().find("span").html("两次密码不一致").css("color","red"),arr[3]=0):"captcha"==$(this).attr("id")&&($(this).val().toLowerCase()==$("#getCaptcha").val().toLowerCase()?($(this).parent().find("span").css("display","none"),arr[4]=1):($(this).parent().find("span").html("请输入正确的验证码").css("color","red"),arr[4]=0)):(arr[index]=0,$(this).parent().find("span").html("输入的信息不能为空").css("color","red"))}),$("#getCaptcha").val(randomCode()),$("#replace").click(function(){$("#getCaptcha").val(randomCode()),$("#getCaptcha").css("color",randomColor(16))}),$("#registerBtn").click(function(){for(var a=0,t=0;t<len;t++)a+=arr[t];a==len?$.ajax({type:"post",url:"../api/reg.php",async:!0,data:{tel:$("#tel").val(),psw:$("#checkPassWord").val()},success:function(a){"yes"==a&&(alert("注册成功"),$(".itxt").val(""),window.location.href="login.html")}}):alert("请填写正确的信息！")});var code="";$("#code").click(function(){if(1==arr[0]){code=randomNum(1e4,999999),$.ajax({type:"post",url:"../api/message.php",async:!0,data:{tel:$("#tel").val(),code:code},success:function(a){JSON.parse(a)}}),$("#code").attr("disabled",!0).css("color","#8C8C8C");var a=setInterval(function(){$times--,$("#code").val("重新获取验证码"+$times+"秒"),$times<0&&(clearInterval(a),$("#code").val("获取短信验证码").attr("disabled",!1).css("color","black"))},1e3);$times=10}});